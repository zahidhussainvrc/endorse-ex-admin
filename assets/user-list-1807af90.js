import{_ as T,r as c,u as N,d as V,m as k,n as M,e as u,o as j,f as z,g as s,q as f,v as y,h as a,s as o,x as _,t as L,y as q,z as F,p as H,j as K}from"./index-70d42a5a.js";import{U as h}from"./UserServices-4523241c.js";const g=d=>(H("data-v-c90d68d2"),d=d(),K(),d),P={class:"col-12"},Q={class:"card"},$=g(()=>s("div",{class:"flex justify-content-between flex-column sm:flex-row"},[s("h4",null,"User List")],-1)),G={class:"button-container"},J={class:"p-field"},O=g(()=>s("label",{for:"name"},"Name",-1)),R={class:"p-field"},W=g(()=>s("label",{for:"email"},"Email",-1)),X={__name:"user-list",setup(d){const p=c([]),w=c(!0),m=c(""),b=c(!1),r=c({}),U=N(),v=async()=>{try{const e=await h.getUser();console.log("Fetched user data:",e),Array.isArray(e)?p.value=e:Array.isArray(e.users)?p.value=e.users:(console.error("Unexpected data format:",e),p.value=[])}catch(e){console.error("Error fetching users:",e)}finally{w.value=!1}},D=async(e,l)=>{const n=l==="active"?"inactive":"active";try{const i=await h.updateUserStatus(e,n);console.log("Change User Status data : ",i),i.status=="success"&&(U.add({severity:"success",summary:"Login Success",detail:i.message,life:3e3}),v())}catch(i){console.error("Error updating user status:",i)}},x=()=>{alert("Close Model"),b.value=!1},A=async()=>{try{const e=await h.updateUser(r.value.id,r.value);e.status=="success"&&(U.add({severity:"success",summary:"Login Success",detail:e.message,life:3e3}),v(),x())}catch(e){console.error("Error updating user:",e)}},I=V(()=>p.value.filter(e=>e.name.toLowerCase().includes(m.value.toLowerCase())||e.email.toLowerCase().includes(m.value.toLowerCase())));let S;return k(()=>{v(),S=setInterval(v,5e3)}),M(()=>{clearInterval(S)}),(e,l)=>{const n=u("Column"),i=u("Tag"),C=u("Button"),E=u("DataTable"),B=u("Dialog");return j(),z("div",P,[s("div",Q,[f(s("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>m.value=t),placeholder:"Search ",class:"p-inputtext p-component"},null,512),[[y,m.value]]),a(E,{value:I.value,loading:w.value,paginator:!0,rows:10,dataKey:"id"},{header:o(()=>[$]),empty:o(()=>[_(" No users found. ")]),loading:o(()=>[_(" Loading user data. Please wait. ")]),default:o(()=>[a(n,{field:"name",header:"Name",style:{"min-width":"12rem"}}),a(n,{field:"email",header:"Email",style:{"min-width":"12rem"}}),a(n,{field:"status",header:"Status",style:{"min-width":"10rem"}},{body:o(({data:t})=>[a(i,{severity:t.status=="active"?"success":"warning"},{default:o(()=>[_(L(t.status=="active"?"Active":"In-Active"),1)]),_:2},1032,["severity"])]),_:1}),a(n,{field:"created_at",header:"Created At",style:{"min-width":"10rem"}},{body:o(({data:t})=>[_(L(new Date(t.created_at).toLocaleDateString()),1)]),_:1}),a(n,{header:"Actions",style:{"min-width":"8rem"}},{body:o(({data:t})=>[s("div",G,[a(C,{label:t.status==="active"?"Inactive":"Active",icon:t.status==="active"?"pi pi-times":"pi pi-check",onClick:Y=>D(t.id,t.status),class:q(t.status==="active"?"p-button-rounded p-button-danger":"p-button-rounded p-button-success")},null,8,["label","icon","onClick","class"])])]),_:1})]),_:1},8,["value","loading"]),a(B,{header:"Edit User",visible:b.value,style:{width:"30vw"},modal:"",onHide:x},{default:o(()=>[s("form",{onSubmit:F(A,["prevent"])},[s("div",J,[O,f(s("input",{id:"name","onUpdate:modelValue":l[1]||(l[1]=t=>r.value.name=t),type:"text",class:"p-inputtext"},null,512),[[y,r.value.name]])]),s("div",R,[W,f(s("input",{id:"email","onUpdate:modelValue":l[2]||(l[2]=t=>r.value.email=t),type:"email",class:"p-inputtext",readonly:""},null,512),[[y,r.value.email]])]),a(C,{label:"Save",type:"submit",class:"p-button p-button-success"})],32)]),_:1},8,["visible"])])])}}},te=T(X,[["__scopeId","data-v-c90d68d2"]]);export{te as default};
